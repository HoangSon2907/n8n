{
    "name": "Telegram Finance Bot Pro",
    "nodes": [
      // ... (giá»¯ nguyÃªn cÃ¡c node cÅ© tá»« file gá»‘c) ...
      
      // ThÃªm node má»›i cho phÃ¢n loáº¡i danh má»¥c
      {
        "parameters": {
          "promptType": "define",
          "text": "PhÃ¢n tÃ­ch vÃ  phÃ¢n loáº¡i giao dá»‹ch vÃ o cÃ¡c nhÃ³m sau:\n\nDanh má»¥c máº«u:\n- Ä‚n uá»‘ng: Äƒn, nhÃ  hÃ ng, cafe\n- Di chuyá»ƒn: xÄƒng, taxi, grab\n- NhÃ  á»Ÿ: tiá»n nhÃ , Ä‘iá»‡n, nÆ°á»›c\n- Giáº£i trÃ­: phim, game\n- LÆ°Æ¡ng: lÆ°Æ¡ng, thu nháº­p\n- KhÃ¡c\n\nKáº¿t quáº£ tráº£ vá» JSON:\n{\n  \"amount\": sá»‘ tiá»n,\n  \"transaction_type\": \"Thu/Chi\",\n  \"category\": \"Danh má»¥c\",\n  \"comment\": \"Giáº£i thÃ­ch\"\n}\n\nNá»™i dung: {{ $json.message.text }}",
          "options": {
            "systemMessage": "Báº¡n lÃ  chuyÃªn gia tÃ i chÃ­nh. Chá»‰ tráº£ vá» JSON Ä‘Ãºng cáº¥u trÃºc."
          }
        },
        "type": "@n8n/n8n-nodes-langchain.agent",
        "id": "category-classifier"
      },
  
      // Node xá»­ lÃ½ lá»‡nh /report
      {
        "parameters": {
          "conditions": {
            "conditions": [
              {
                "id": "report-command",
                "leftValue": "={{ $json.message.text }}",
                "rightValue": "/report",
                "operator": "startsWith"
              }
            ]
          }
        },
        "type": "n8n-nodes-base.if",
        "id": "detect-report-command"
      },
  
      // Node láº¥y dá»¯ liá»‡u tá»« Google Sheets
      {
        "parameters": {
          "operation": "read",
          "documentId": "12cI3im6JpJKDHFwXMXRFG_CLCsGem7h7ONitXrP86iM",
          "sheetName": "gid=0",
          "range": "A:E",
          "options": {}
        },
        "type": "n8n-nodes-base.googleSheets",
        "id": "get-sheet-data"
      },
  
      // Node táº¡o bÃ¡o cÃ¡o
      {
        "parameters": {
          "jsCode": "const data = $('get-sheet-data').item.json;\nconst currentMonth = new Date().getMonth() + 1;\n\n// Xá»­ lÃ½ dá»¯ liá»‡u\nconst reportData = {\n  month: currentMonth,\n  income: 0,\n  expenses: {},\n  categories: ['Ä‚n uá»‘ng', 'Di chuyá»ƒn', 'NhÃ  á»Ÿ', 'Giáº£i trÃ­', 'KhÃ¡c']\n};\n\n// TÃ­nh toÃ¡n thá»‘ng kÃª\ndata.forEach(row => {\n  const date = new Date(row.Date);\n  if (date.getMonth() + 1 === currentMonth) {\n    if (row.ThuOrChi === 'Thu') {\n      reportData.income += Number(row.Amount);\n    } else {\n      const category = row.Category || 'KhÃ¡c';\n      reportData.expenses[category] = (reportData.expenses[category] || 0) + Number(row.Amount);\n    }\n  }\n});\n\n// Táº¡o bÃ¡o cÃ¡o dáº¡ng text\nlet reportText = `ğŸ“Š BÃ¡o cÃ¡o thÃ¡ng ${currentMonth}/${new Date().getFullYear()}\\n`;\nreportText += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\\n`;\nreportText += `ğŸ’° Tá»•ng thu: ${formatCurrency(reportData.income)}\\n`;\n\nconst totalExpense = Object.values(reportData.expenses).reduce((a, b) => a + b, 0);\nreportText += `ğŸ’¸ Tá»•ng chi: ${formatCurrency(totalExpense)}\\n`;\nreportText += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\\n`;\nreportText += `ğŸ“‰ Chi tiáº¿t chi tiÃªu:\\n`;\n\nfor (const [category, amount] of Object.entries(reportData.expenses)) {\n  reportText += `â–«ï¸ ${category}: ${formatCurrency(amount)} (${Math.round(amount/totalExpense*100)}%)\\n`;\n}\n\nreportText += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\\n`;\nreportText += `ğŸ’¡ Tiáº¿t kiá»‡m: ${formatCurrency(reportData.income - totalExpense)}`;\n\nfunction formatCurrency(amount) {\n  return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);\n}\n\nreturn { json: { reportText } };"
        },
        "type": "n8n-nodes-base.code",
        "id": "generate-report"
      }
    ],
    "connections": {
      // ... (káº¿t ná»‘i cÃ¡c node má»›i) ...
      "detect-report-command": {
        "main": [
          [
            {
              "node": "get-sheet-data",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "get-sheet-data": {
        "main": [
          [
            {
              "node": "generate-report",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    }
  }